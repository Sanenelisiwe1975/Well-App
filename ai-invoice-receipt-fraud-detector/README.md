# AI invoice receipt fraud detector

A pluggable **TypeScript library and CLI** to detect fake or AI-generated invoices and receipts using **heuristics + LLMs**.

---

## üöÄ Features

- Detect anomalies in invoices and receipts:
  - üìÑ Visual formatting
  - ‚úçÔ∏è Textual inconsistencies (totals, fields)
  - üìÇ Suspicious metadata (PDF producer)
  - ü§ñ AI-generated hallucinations via LLM
- LLM-enabled via `useLLMBackend()`
- Supports OpenAI (GPT-4) out of the box
- Simple CLI interface for PDF, image, or JSON
- Outputs standardized `DetectionResult` JSON

---

## üß± Monorepo Structure

```
oss-invoice-detector/
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ core       # analysis pipeline & logic
‚îÇ   ‚îú‚îÄ‚îÄ types      # shared interfaces and JSON schema
‚îÇ   ‚îú‚îÄ‚îÄ models     # LLM adapters (OpenAI, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ cli        # command line tool
‚îÇ   ‚îî‚îÄ‚îÄ samples    # example documents
‚îú‚îÄ‚îÄ .env           # (not committed) OpenAI key
```

---

## üì¶ Installation

```bash
pnpm install
```

> Requires `pnpm`, Node.js >= 20.x

---

## ‚öôÔ∏è Build & Clean

```bash
pnpm run clean    # removes all dist/ folders and build files
pnpm run build    # clean + build all packages
```

---

## üìÅ Insert the file

file to analyze location : packages/samples

---

## üíª CLI Usage

```bash
pnpm run analyze --file example.jpg
```

### Optional

```bash
pnpm run analyze --file example.jpg --output output/result.json
```

> Supports: `.pdf`, `.jpg`, `.png`, `.json`

---

## üß† LLM Integration

Use OpenAI with:

```ts
import { useLLMBackend } from '@fraud-detector/models';

useLLMBackend('openai', {
  provider: 'openai',
  apiKey: process.env.OPENAI_API_KEY,
});
```

Extend by implementing your own adapter matching:

```ts
interface LLMBackend {
  name: string;
  generate(prompt: string): Promise<DetectionResult>;
}
```

---

## üß™ Example Output

```json
{
  "is_fake": true,
  "confidence": 84,
  "indicators": [
    {
      "category": "textual",
      "value": "invoice total does not match item sum",
      "description": "Declared total is 100.00, but sum of items is 81.25"
    },
    {
      "category": "metadata",
      "value": "Generated by: FakePDF AI Tool",
      "description": "Suspicious PDF producer suggests AI generation"
    }
  ]
}
```

---

## üìú JSON Schema Output

The output conforms to the `DetectionResult` TypeScript interface:

```ts
interface DetectionResult {
  is_fake: boolean;
  confidence: number;
  indicators: Array<{
    category: 'visual' | 'textual' | 'metadata' | 'behavioral' | 'ai_generated';
    value: string;
    description: string;
  }>;
}
```

Located in:

```
packages/types/src/DetectionResult.ts
packages/types/schemas/detection-result.schema.json
```

---

## üîê .env Example

```
OPENAI_API_KEY=sk-...
```

---


